{"file":"action-menu.js","mappings":"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","names":[],"sources":["../../node_modules/.pnpm/@esri+calcite-components@1.2.0/node_modules/@esri/calcite-components/dist/collection/components/action-menu/resources.js","../../node_modules/.pnpm/@esri+calcite-components@1.2.0/node_modules/@esri/calcite-components/dist/collection/components/action-menu/action-menu.css?tag=calcite-action-menu&encapsulation=shadow","../../node_modules/.pnpm/@esri+calcite-components@1.2.0/node_modules/@esri/calcite-components/dist/collection/components/action-menu/action-menu.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.2.0\n */\nexport const CSS = {\n  menu: \"menu\",\n  defaultTrigger: \"default-trigger\"\n};\nexport const SLOTS = {\n  tooltip: \"tooltip\",\n  trigger: \"trigger\"\n};\nexport const ICONS = {\n  menu: \"ellipsis\"\n};\n","/* mixins & extensions */\n@keyframes in {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes in-down {\n  0% {\n    opacity: 0;\n    transform: translate3D(0, -5px, 0);\n  }\n  100% {\n    opacity: 1;\n    transform: translate3D(0, 0, 0);\n  }\n}\n@keyframes in-up {\n  0% {\n    opacity: 0;\n    transform: translate3D(0, 5px, 0);\n  }\n  100% {\n    opacity: 1;\n    transform: translate3D(0, 0, 0);\n  }\n}\n@keyframes in-scale {\n  0% {\n    opacity: 0;\n    transform: scale3D(0.95, 0.95, 1);\n  }\n  100% {\n    opacity: 1;\n    transform: scale3D(1, 1, 1);\n  }\n}\n:root {\n  --calcite-animation-timing: calc(150ms * var(--calcite-internal-duration-factor));\n  --calcite-internal-duration-factor: var(--calcite-duration-factor, 1);\n  --calcite-internal-animation-timing-fast: calc(100ms * var(--calcite-internal-duration-factor));\n  --calcite-internal-animation-timing-medium: calc(200ms * var(--calcite-internal-duration-factor));\n  --calcite-internal-animation-timing-slow: calc(300ms * var(--calcite-internal-duration-factor));\n}\n\n.calcite-animate {\n  opacity: 0;\n  animation-fill-mode: both;\n  animation-duration: var(--calcite-animation-timing);\n}\n\n.calcite-animate__in {\n  animation-name: in;\n}\n\n.calcite-animate__in-down {\n  animation-name: in-down;\n}\n\n.calcite-animate__in-up {\n  animation-name: in-up;\n}\n\n.calcite-animate__in-scale {\n  animation-name: in-scale;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  :root {\n    --calcite-internal-duration-factor: 0.01;\n  }\n}\n/* helper to properly scale internal durations */\n/**\n* Currently only used in Checkbox.\n*/\n:root {\n  --calcite-floating-ui-transition: var(--calcite-animation-timing);\n  --calcite-floating-ui-z-index: 600;\n}\n\n:host([hidden]) {\n  display: none;\n}\n\n:host {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  background-color: var(--calcite-ui-foreground-1);\n  font-size: var(--calcite-font-size-1);\n  color: var(--calcite-ui-text-2);\n}\n\n.menu ::slotted(calcite-action) {\n  margin: 0.125rem;\n  display: flex;\n  outline-color: transparent;\n}\n\n.menu ::slotted(calcite-action[active]) {\n  outline: 2px solid var(--calcite-ui-brand);\n  outline-offset: 0px;\n}\n\n.default-trigger {\n  position: relative;\n  block-size: 100%;\n  flex: 0 1 auto;\n  align-self: stretch;\n}\n\nslot[name=trigger]::slotted(calcite-action),\ncalcite-action::slotted([slot=trigger]) {\n  position: relative;\n  block-size: 100%;\n  flex: 0 1 auto;\n  align-self: stretch;\n}\n\n.menu {\n  flex-direction: column;\n  flex-wrap: nowrap;\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n}","/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.2.0\n */\nimport { h } from \"@stencil/core\";\nimport { Fragment } from \"@stencil/core/internal\";\nimport { getRoundRobinIndex } from \"../../utils/array\";\nimport { focusElement, isPrimaryPointerButton, toAriaBoolean } from \"../../utils/dom\";\nimport { guid } from \"../../utils/guid\";\nimport { isActivationKey } from \"../../utils/key\";\nimport { componentLoaded, setComponentLoaded, setUpLoadableComponent } from \"../../utils/loadable\";\nimport { CSS, ICONS, SLOTS } from \"./resources\";\nconst SUPPORTED_MENU_NAV_KEYS = [\"ArrowUp\", \"ArrowDown\", \"End\", \"Home\"];\n/**\n * @slot - A slot for adding `calcite-action`s.\n * @slot trigger - A slot for adding a `calcite-action` to trigger opening the menu.\n * @slot tooltip - A slot for adding an tooltip for the menu.\n */\nexport class ActionMenu {\n  constructor() {\n    this.actionElements = [];\n    this.guid = `calcite-action-menu-${guid()}`;\n    this.menuId = `${this.guid}-menu`;\n    this.menuButtonId = `${this.guid}-menu-button`;\n    // --------------------------------------------------------------------------\n    //\n    //  Component Methods\n    //\n    // --------------------------------------------------------------------------\n    this.connectMenuButtonEl = () => {\n      const { menuButtonId, menuId, open, label } = this;\n      const menuButtonEl = this.slottedMenuButtonEl || this.defaultMenuButtonEl;\n      if (this.menuButtonEl === menuButtonEl) {\n        return;\n      }\n      this.disconnectMenuButtonEl();\n      this.menuButtonEl = menuButtonEl;\n      this.setTooltipReferenceElement();\n      if (!menuButtonEl) {\n        return;\n      }\n      menuButtonEl.active = open;\n      menuButtonEl.setAttribute(\"aria-controls\", menuId);\n      menuButtonEl.setAttribute(\"aria-expanded\", toAriaBoolean(open));\n      menuButtonEl.setAttribute(\"aria-haspopup\", \"true\");\n      if (!menuButtonEl.id) {\n        menuButtonEl.id = menuButtonId;\n      }\n      if (!menuButtonEl.label) {\n        menuButtonEl.label = label;\n      }\n      if (!menuButtonEl.text) {\n        menuButtonEl.text = label;\n      }\n      menuButtonEl.addEventListener(\"pointerdown\", this.menuButtonClick);\n      menuButtonEl.addEventListener(\"keydown\", this.menuButtonKeyDown);\n    };\n    this.disconnectMenuButtonEl = () => {\n      const { menuButtonEl } = this;\n      if (!menuButtonEl) {\n        return;\n      }\n      menuButtonEl.removeEventListener(\"pointerdown\", this.menuButtonClick);\n      menuButtonEl.removeEventListener(\"keydown\", this.menuButtonKeyDown);\n    };\n    this.setMenuButtonEl = (event) => {\n      const actions = event.target\n        .assignedElements({\n        flatten: true\n      })\n        .filter((el) => el?.matches(\"calcite-action\"));\n      this.slottedMenuButtonEl = actions[0];\n      this.connectMenuButtonEl();\n    };\n    this.setDefaultMenuButtonEl = (el) => {\n      this.defaultMenuButtonEl = el;\n      this.connectMenuButtonEl();\n    };\n    // --------------------------------------------------------------------------\n    //\n    //  Private Methods\n    //\n    // --------------------------------------------------------------------------\n    this.handleCalciteActionClick = () => {\n      this.open = false;\n      this.setFocus();\n    };\n    this.menuButtonClick = (event) => {\n      if (!isPrimaryPointerButton(event)) {\n        return;\n      }\n      this.toggleOpen();\n    };\n    this.updateTooltip = (event) => {\n      const tooltips = event.target\n        .assignedElements({\n        flatten: true\n      })\n        .filter((el) => el?.matches(\"calcite-tooltip\"));\n      this.tooltipEl = tooltips[0];\n      this.setTooltipReferenceElement();\n    };\n    this.setTooltipReferenceElement = () => {\n      const { tooltipEl, expanded, menuButtonEl, open } = this;\n      if (tooltipEl) {\n        tooltipEl.referenceElement = !expanded && !open ? menuButtonEl : null;\n      }\n    };\n    this.updateAction = (action, index) => {\n      const { guid, activeMenuItemIndex } = this;\n      const id = `${guid}-action-${index}`;\n      action.tabIndex = -1;\n      action.setAttribute(\"role\", \"menuitem\");\n      if (!action.id) {\n        action.id = id;\n      }\n      action.active = index === activeMenuItemIndex;\n    };\n    this.updateActions = (actions) => {\n      actions?.forEach(this.updateAction);\n    };\n    this.handleDefaultSlotChange = (event) => {\n      const actions = event.target\n        .assignedElements({\n        flatten: true\n      })\n        .filter((el) => el?.matches(\"calcite-action\"));\n      this.actionElements = actions;\n    };\n    this.menuButtonKeyDown = (event) => {\n      const { key } = event;\n      const { actionElements, activeMenuItemIndex, open } = this;\n      if (!actionElements.length) {\n        return;\n      }\n      if (isActivationKey(key)) {\n        event.preventDefault();\n        if (!open) {\n          this.toggleOpen();\n          return;\n        }\n        const action = actionElements[activeMenuItemIndex];\n        action ? action.click() : this.toggleOpen(false);\n      }\n      if (key === \"Tab\") {\n        this.open = false;\n        return;\n      }\n      if (key === \"Escape\") {\n        this.toggleOpen(false);\n        event.preventDefault();\n        return;\n      }\n      this.handleActionNavigation(event, key, actionElements);\n    };\n    this.handleActionNavigation = (event, key, actions) => {\n      if (!this.isValidKey(key, SUPPORTED_MENU_NAV_KEYS)) {\n        return;\n      }\n      event.preventDefault();\n      if (!this.open) {\n        this.toggleOpen();\n        if (key === \"Home\" || key === \"ArrowDown\") {\n          this.activeMenuItemIndex = 0;\n        }\n        if (key === \"End\" || key === \"ArrowUp\") {\n          this.activeMenuItemIndex = actions.length - 1;\n        }\n        return;\n      }\n      if (key === \"Home\") {\n        this.activeMenuItemIndex = 0;\n      }\n      if (key === \"End\") {\n        this.activeMenuItemIndex = actions.length - 1;\n      }\n      const currentIndex = this.activeMenuItemIndex;\n      if (key === \"ArrowUp\") {\n        this.activeMenuItemIndex = getRoundRobinIndex(Math.max(currentIndex - 1, -1), actions.length);\n      }\n      if (key === \"ArrowDown\") {\n        this.activeMenuItemIndex = getRoundRobinIndex(currentIndex + 1, actions.length);\n      }\n    };\n    this.toggleOpenEnd = () => {\n      this.setFocus();\n      this.el.removeEventListener(\"calcitePopoverOpen\", this.toggleOpenEnd);\n    };\n    this.toggleOpen = (value = !this.open) => {\n      this.el.addEventListener(\"calcitePopoverOpen\", this.toggleOpenEnd);\n      this.open = value;\n    };\n    this.expanded = false;\n    this.flipPlacements = undefined;\n    this.label = undefined;\n    this.open = false;\n    this.overlayPositioning = \"absolute\";\n    this.placement = \"auto\";\n    this.scale = undefined;\n    this.menuButtonEl = undefined;\n    this.activeMenuItemIndex = -1;\n  }\n  // --------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  // --------------------------------------------------------------------------\n  componentWillLoad() {\n    setUpLoadableComponent(this);\n  }\n  componentDidLoad() {\n    setComponentLoaded(this);\n  }\n  disconnectedCallback() {\n    this.disconnectMenuButtonEl();\n  }\n  expandedHandler() {\n    this.open = false;\n    this.setTooltipReferenceElement();\n  }\n  openHandler(open) {\n    this.activeMenuItemIndex = this.open ? 0 : -1;\n    if (this.menuButtonEl) {\n      this.menuButtonEl.active = open;\n    }\n    this.calciteActionMenuOpen.emit();\n    this.setTooltipReferenceElement();\n  }\n  closeCalciteActionMenuOnClick(event) {\n    if (!isPrimaryPointerButton(event)) {\n      return;\n    }\n    const composedPath = event.composedPath();\n    if (composedPath.includes(this.el)) {\n      return;\n    }\n    this.open = false;\n  }\n  activeMenuItemIndexHandler() {\n    this.updateActions(this.actionElements);\n  }\n  // --------------------------------------------------------------------------\n  //\n  //  Methods\n  //\n  // --------------------------------------------------------------------------\n  /** Sets focus on the component. */\n  async setFocus() {\n    await componentLoaded(this);\n    focusElement(this.menuButtonEl);\n  }\n  renderMenuButton() {\n    const { label, scale, expanded } = this;\n    const menuButtonSlot = (h(\"slot\", { name: SLOTS.trigger, onSlotchange: this.setMenuButtonEl }, h(\"calcite-action\", { class: CSS.defaultTrigger, icon: ICONS.menu, scale: scale, text: label, textEnabled: expanded,\n      // eslint-disable-next-line react/jsx-sort-props\n      ref: this.setDefaultMenuButtonEl })));\n    return menuButtonSlot;\n  }\n  renderMenuItems() {\n    const { actionElements, activeMenuItemIndex, open, menuId, menuButtonEl, label, placement, overlayPositioning, flipPlacements } = this;\n    const activeAction = actionElements[activeMenuItemIndex];\n    const activeDescendantId = activeAction?.id || null;\n    return (h(\"calcite-popover\", { flipPlacements: flipPlacements, focusTrapDisabled: true, label: label, offsetDistance: 0, open: open, overlayPositioning: overlayPositioning, placement: placement, pointerDisabled: true, referenceElement: menuButtonEl }, h(\"div\", { \"aria-activedescendant\": activeDescendantId, \"aria-labelledby\": menuButtonEl?.id, class: CSS.menu, id: menuId, onClick: this.handleCalciteActionClick, role: \"menu\", tabIndex: -1 }, h(\"slot\", { onSlotchange: this.handleDefaultSlotChange }))));\n  }\n  render() {\n    return (h(Fragment, null, this.renderMenuButton(), this.renderMenuItems(), h(\"slot\", { name: SLOTS.tooltip, onSlotchange: this.updateTooltip })));\n  }\n  isValidKey(key, supportedKeys) {\n    return !!supportedKeys.find((k) => k === key);\n  }\n  static get is() { return \"calcite-action-menu\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"action-menu.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"action-menu.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"expanded\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"When `true`, the component is expanded.\"\n        },\n        \"attribute\": \"expanded\",\n        \"reflect\": true,\n        \"defaultValue\": \"false\"\n      },\n      \"flipPlacements\": {\n        \"type\": \"unknown\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"EffectivePlacement[]\",\n          \"resolved\": \"Placement[]\",\n          \"references\": {\n            \"EffectivePlacement\": {\n              \"location\": \"import\",\n              \"path\": \"../../utils/floating-ui\"\n            }\n          }\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Defines the available placements that can be used when a flip occurs.\"\n        }\n      },\n      \"label\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": true,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Specifies the text string for the component.\"\n        },\n        \"attribute\": \"label\",\n        \"reflect\": false\n      },\n      \"open\": {\n        \"type\": \"boolean\",\n        \"mutable\": true,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"When `true`, the component is open.\"\n        },\n        \"attribute\": \"open\",\n        \"reflect\": true,\n        \"defaultValue\": \"false\"\n      },\n      \"overlayPositioning\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"OverlayPositioning\",\n          \"resolved\": \"\\\"absolute\\\" | \\\"fixed\\\"\",\n          \"references\": {\n            \"OverlayPositioning\": {\n              \"location\": \"import\",\n              \"path\": \"../../utils/floating-ui\"\n            }\n          }\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Determines the type of positioning to use for the overlaid content.\\n\\nUsing `\\\"absolute\\\"` will work for most cases. The component will be positioned inside of overflowing parent containers and will affect the container's layout.\\n`\\\"fixed\\\"` should be used to escape an overflowing parent container, or when the reference element's `position` CSS property is `\\\"fixed\\\"`.\"\n        },\n        \"attribute\": \"overlay-positioning\",\n        \"reflect\": true,\n        \"defaultValue\": \"\\\"absolute\\\"\"\n      },\n      \"placement\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"LogicalPlacement\",\n          \"resolved\": \"\\\"auto\\\" | \\\"top\\\" | \\\"right\\\" | \\\"bottom\\\" | \\\"left\\\" | \\\"top-start\\\" | \\\"top-end\\\" | \\\"right-start\\\" | \\\"right-end\\\" | \\\"bottom-start\\\" | \\\"bottom-end\\\" | \\\"left-start\\\" | \\\"left-end\\\" | \\\"auto-start\\\" | \\\"auto-end\\\" | \\\"leading-start\\\" | \\\"leading\\\" | \\\"leading-end\\\" | \\\"trailing-end\\\" | \\\"trailing\\\" | \\\"trailing-start\\\"\",\n          \"references\": {\n            \"LogicalPlacement\": {\n              \"location\": \"import\",\n              \"path\": \"../../utils/floating-ui\"\n            }\n          }\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Determines where the component will be positioned relative to the `referenceElement`.\"\n        },\n        \"attribute\": \"placement\",\n        \"reflect\": true,\n        \"defaultValue\": \"\\\"auto\\\"\"\n      },\n      \"scale\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"Scale\",\n          \"resolved\": \"\\\"l\\\" | \\\"m\\\" | \\\"s\\\"\",\n          \"references\": {\n            \"Scale\": {\n              \"location\": \"import\",\n              \"path\": \"../interfaces\"\n            }\n          }\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Specifies the size of the component's trigger `calcite-action`.\"\n        },\n        \"attribute\": \"scale\",\n        \"reflect\": true\n      }\n    };\n  }\n  static get states() {\n    return {\n      \"menuButtonEl\": {},\n      \"activeMenuItemIndex\": {}\n    };\n  }\n  static get events() {\n    return [{\n        \"method\": \"calciteActionMenuOpen\",\n        \"name\": \"calciteActionMenuOpen\",\n        \"bubbles\": true,\n        \"cancelable\": false,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Emits when the `open` property is toggled.\"\n        },\n        \"complexType\": {\n          \"original\": \"void\",\n          \"resolved\": \"void\",\n          \"references\": {}\n        }\n      }];\n  }\n  static get methods() {\n    return {\n      \"setFocus\": {\n        \"complexType\": {\n          \"signature\": \"() => Promise<void>\",\n          \"parameters\": [],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<void>\"\n        },\n        \"docs\": {\n          \"text\": \"Sets focus on the component.\",\n          \"tags\": []\n        }\n      }\n    };\n  }\n  static get elementRef() { return \"el\"; }\n  static get watchers() {\n    return [{\n        \"propName\": \"expanded\",\n        \"methodName\": \"expandedHandler\"\n      }, {\n        \"propName\": \"open\",\n        \"methodName\": \"openHandler\"\n      }, {\n        \"propName\": \"activeMenuItemIndex\",\n        \"methodName\": \"activeMenuItemIndexHandler\"\n      }];\n  }\n  static get listeners() {\n    return [{\n        \"name\": \"pointerdown\",\n        \"method\": \"closeCalciteActionMenuOnClick\",\n        \"target\": \"window\",\n        \"capture\": false,\n        \"passive\": true\n      }];\n  }\n}\n"],"version":3}